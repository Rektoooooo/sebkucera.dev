(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{8577:function(e,t,n){Promise.resolve().then(n.bind(n,2102))},2102:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),s=n(2265),o=n(9116),a=n(4226),l=n(9178);function i(e){let{children:t,variant:n="default",className:s=""}=e;return(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ".concat({success:"bg-green-500/20 text-green-400 border-green-500/50",danger:"bg-red-500/20 text-red-400 border-red-500/50",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",default:"bg-zinc-500/20 text-zinc-400 border-zinc-500/50"}[n]," ").concat(s),children:t})}function c(e){let{className:t=""}=e,[n,a]=(0,s.useState)([]),[l,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0),[u,x]=(0,s.useState)(""),[h,m]=(0,s.useState)([]),[f,g]=(0,s.useState)(-1),[p,b]=(0,s.useState)(!1),v=(0,s.useRef)(null),j=(0,s.useRef)(null),w=(0,s.useRef)(null),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=new WebSocket("".concat(o._4,"/ws/logs?token=").concat(e));return y.current=t,t.onopen=()=>{i(!0)},t.onmessage=e=>{let t=e.data;a(e=>[...e,t])},t.onerror=()=>{i(!1)},t.onclose=()=>{i(!1)},()=>{t.close()}},[]),(0,s.useEffect)(()=>{c&&v.current&&v.current.scrollIntoView({behavior:"smooth"})},[n,c]);let N=async e=>{if(e.preventDefault(),u.trim()&&!p){b(!0);try{m(e=>[...e,u]),g(-1),await o.hi.post("/server/command",{command:u.trim()}),x(""),a(e=>[...e,"> ".concat(u)])}catch(e){console.error("Failed to send command:",e),a(t=>[...t,"Error: Failed to send command - ".concat(e.message)])}finally{var t;b(!1),null===(t=w.current)||void 0===t||t.focus()}}};return(0,r.jsxs)("div",{className:t,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Live Logs"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(l?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-xs text-zinc-500",children:l?"Connected":"Disconnected"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>d(!c),className:"text-xs px-3 py-1 rounded ".concat(c?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400"),children:["Auto-scroll ",c?"ON":"OFF"]}),(0,r.jsx)("button",{onClick:()=>{a([])},className:"text-xs px-3 py-1 rounded bg-zinc-800 text-zinc-400 hover:bg-zinc-700",children:"Clear"})]})]}),(0,r.jsx)("div",{ref:j,onScroll:()=>{if(j.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=j.current;d(t-e-n<50)}},className:"bg-black border border-zinc-800 rounded-t-lg p-4 h-96 overflow-y-auto font-mono text-sm",children:0===n.length?(0,r.jsx)("div",{className:"text-zinc-600 text-center py-8",children:"No logs yet. Waiting for server output..."}):(0,r.jsxs)(r.Fragment,{children:[n.map((e,t)=>(0,r.jsx)("div",{className:"text-zinc-300 mb-1 whitespace-pre-wrap",children:e},t)),(0,r.jsx)("div",{ref:v})]})}),(0,r.jsxs)("form",{onSubmit:N,className:"bg-zinc-900 border border-t-0 border-zinc-800 rounded-b-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center text-green-500 font-mono text-sm font-semibold",children:(0,r.jsx)("span",{children:"$"})}),(0,r.jsx)("input",{ref:w,type:"text",value:u,onChange:e=>x(e.target.value),onKeyDown:e=>{if("ArrowUp"===e.key){if(e.preventDefault(),0===h.length)return;let t=-1===f?h.length-1:Math.max(0,f-1);g(t),x(h[t])}if("ArrowDown"===e.key){if(e.preventDefault(),-1===f)return;let t=f+1;t>=h.length?(g(-1),x("")):(g(t),x(h[t]))}},placeholder:"Enter server command... (e.g., say Hello, list, stop)",disabled:!l||p,className:"flex-1 bg-black border border-zinc-800 rounded px-3 py-2 text-sm font-mono text-zinc-300 placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),(0,r.jsx)("button",{type:"submit",disabled:!l||p||!u.trim(),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending"]}):"Send"})]}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 mt-2",children:"Use ↑/↓ arrow keys to navigate command history"})]})]})}function d(){let[e,t]=(0,s.useState)(null),[n,d]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),f=(0,s.useCallback)(async()=>{try{let e=await o.hi.get("/server/status");t(e),x(t=>"start"===t&&e.online||"stop"===t&&!e.online||"restart"===t&&e.online?null:t)}catch(e){console.error("Failed to fetch status:",e)}finally{d(!1)}},[]);(0,s.useEffect)(()=>{m(!0),f();let e=setInterval(f,5e3);return()=>clearInterval(e)},[]);let g=async e=>{x(e);try{await o.hi.post("/server/".concat(e))}catch(t){alert("Failed to ".concat(e," server: ").concat(t.message)),x(null)}},p=(null==e?void 0:e.online)===!0;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-zinc-400",children:"Monitor and control your Minecraft server"})]}),!h||n?(0,r.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)(l.Z,{title:"Server Status",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(i,{variant:p?"success":"danger",className:"text-lg px-4 py-2",children:p?"● Online":"● Offline"})}),p&&(null==e?void 0:e.players)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-zinc-400 text-sm mb-1",children:"Players Online"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white",children:[e.players.online," / ",e.players.max]})]})]})}),(0,r.jsx)(l.Z,{title:"Quick Actions",className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)(a.z,{variant:"success",onClick:()=>g("start"),loading:"start"===u,disabled:p||null!==u,children:[(0,r.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Server"]}),(0,r.jsxs)(a.z,{variant:"danger",onClick:()=>g("stop"),loading:"stop"===u,disabled:!p||null!==u,children:[(0,r.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Stop Server"]}),(0,r.jsxs)(a.z,{variant:"secondary",onClick:()=>g("restart"),loading:"restart"===u,disabled:!p||null!==u,children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart Server"]})]})})]}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(c,{})})]})]})}},4226:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(7437);function s(e){let{variant:t="primary",size:n="md",loading:s=!1,disabled:o,className:a="",children:l,...i}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#09090b] disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-zinc-800 hover:bg-zinc-700 text-white focus:ring-zinc-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-300 focus:ring-zinc-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(a),disabled:o||s,...i,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}n(2265)},9178:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){let{children:t,className:n="",title:s}=e;return(0,r.jsxs)("div",{className:"bg-[#18181b] border border-zinc-800 rounded-lg p-6 ".concat(n),children:[s&&(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-white",children:s}),t]})}n(2265)},9116:function(e,t,n){"use strict";n.d(t,{_4:function(){return a},hi:function(){return o}});let r="https://panel.sebkucera.dev";class s extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}let o={async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),o={"Content-Type":"application/json",...t.headers};n&&(o.Authorization="Bearer ".concat(n));let a=await fetch("".concat(r).concat(e),{...t,headers:o});if(401===a.status)throw localStorage.removeItem("token"),window.location.href="/login",new s(401,"Unauthorized");if(!a.ok){let e=await a.text();throw new s(a.status,e||"Request failed")}let l=a.headers.get("content-type");return l&&l.includes("application/json")?a.json():a},get(e){return this.request(e,{method:"GET"})},post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})},upload(e,t){let n=localStorage.getItem("token"),o=new FormData;o.append("file",t);let a={};return n&&(a.Authorization="Bearer ".concat(n)),fetch("".concat(r).concat(e),{method:"POST",headers:a,body:o}).then(async e=>{if(401===e.status)throw localStorage.removeItem("token"),window.location.href="/login",new s(401,"Unauthorized");if(!e.ok){let t=await e.text();throw new s(e.status,t||"Upload failed")}return e.json()})}},a="wss://panel.sebkucera.dev"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8577)}),_N_E=e.O()}]);