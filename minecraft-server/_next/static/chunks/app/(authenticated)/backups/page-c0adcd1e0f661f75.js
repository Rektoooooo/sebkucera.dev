(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{7909:function(e,t,n){Promise.resolve().then(n.bind(n,2091))},2091:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(7437),r=n(2265),a=n(9116),i=n(4226),c=n(9178),o=n(5998);function l(){let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[g,w]=(0,r.useState)(!1),j=async()=>{try{let e=await a.hi.get("/backups/list");t(e.backups||[])}catch(e){console.error("Failed to fetch backups:",e)}finally{l(!1)}};(0,r.useEffect)(()=>{w(!0),j()},[]);let y=async()=>{u("create");try{await a.hi.post("/backups/create"),await j()}catch(e){alert("Failed to create backup: ".concat(e.message))}finally{u(null)}},v=e=>{let t=localStorage.getItem("token");window.open("".concat("https://panel.sebkucera.dev","/backups/download/").concat(e.id,"?token=").concat(t),"_blank")},k=async()=>{if(p){u("restore");try{await a.hi.post("/backups/restore/".concat(p.id)),m(!1),alert("Backup restored successfully!")}catch(e){alert("Failed to restore backup: ".concat(e.message))}finally{u(null),b(null)}}},z=async()=>{if(p){u("delete");try{await a.hi.post("/backups/delete/".concat(p.id)),f(!1),await j()}catch(e){alert("Failed to delete backup: ".concat(e.message))}finally{u(null),b(null)}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Backups"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Manage your server backups"})]}),(0,s.jsxs)(i.z,{variant:"primary",onClick:y,loading:"create"===d,disabled:!g,children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Backup"]})]}),!g||n?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,s.jsx)(c.Z,{children:0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"w-16 h-16 text-zinc-700 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),(0,s.jsx)("p",{className:"text-zinc-400",children:"No backups found"}),(0,s.jsx)("p",{className:"text-zinc-600 text-sm mt-2",children:"Create your first backup to get started"})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-zinc-900 rounded-lg border border-zinc-800",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-medium",children:e.name||e.id}),(0,s.jsxs)("p",{className:"text-sm text-zinc-500",children:[e.size," â€¢ ",new Date(e.created).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{size:"sm",variant:"secondary",onClick:()=>v(e),children:"Download"}),(0,s.jsx)(i.z,{size:"sm",variant:"primary",onClick:()=>{b(e),m(!0)},children:"Restore"}),(0,s.jsx)(i.z,{size:"sm",variant:"danger",onClick:()=>{b(e),f(!0)},children:"Delete"})]})]},e.id))})}),(0,s.jsxs)(o.u,{isOpen:h,onClose:()=>{m(!1),b(null)},onConfirm:k,title:"Restore Backup",confirmText:"Restore",confirmVariant:"primary",children:[(0,s.jsxs)("p",{children:["Are you sure you want to restore backup ",(0,s.jsx)("strong",{children:(null==p?void 0:p.name)||(null==p?void 0:p.id)}),"?"]}),(0,s.jsx)("p",{className:"text-yellow-500 mt-3",children:"Warning: This will stop the server and replace all current world data."})]}),(0,s.jsxs)(o.u,{isOpen:x,onClose:()=>{f(!1),b(null)},onConfirm:z,title:"Delete Backup",confirmText:"Delete",confirmVariant:"danger",children:[(0,s.jsxs)("p",{children:["Are you sure you want to delete backup ",(0,s.jsx)("strong",{children:(null==p?void 0:p.name)||(null==p?void 0:p.id)}),"?"]}),(0,s.jsx)("p",{className:"text-red-400 mt-3",children:"This action cannot be undone."})]})]})}},4226:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var s=n(7437);function r(e){let{variant:t="primary",size:n="md",loading:r=!1,disabled:a,className:i="",children:c,...o}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#09090b] disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-zinc-800 hover:bg-zinc-700 text-white focus:ring-zinc-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-300 focus:ring-zinc-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(i),disabled:a||r,...o,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})}n(2265)},9178:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{children:t,className:n="",title:r}=e;return(0,s.jsxs)("div",{className:"bg-[#18181b] border border-zinc-800 rounded-lg p-6 ".concat(n),children:[r&&(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-white",children:r}),t]})}n(2265)},5998:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var s=n(7437),r=n(2265),a=n(4226);function i(e){let{isOpen:t,onClose:n,onConfirm:i,title:c,children:o,confirmText:l="Confirm",cancelText:d="Cancel",confirmVariant:u="primary"}=e;return((0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75",onClick:n}),(0,s.jsxs)("div",{className:"relative bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:c}),(0,s.jsx)("div",{className:"text-zinc-300 mb-6",children:o}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(a.z,{variant:"ghost",onClick:n,children:d}),i&&(0,s.jsx)(a.z,{variant:u,onClick:i,children:l})]})]})]}):null}},9116:function(e,t,n){"use strict";n.d(t,{_4:function(){return i},hi:function(){return a}});let s="https://panel.sebkucera.dev";class r extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}let a={async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers};n&&(a.Authorization="Bearer ".concat(n));let i=await fetch("".concat(s).concat(e),{...t,headers:a});if(401===i.status)throw localStorage.removeItem("token"),window.location.href="/login",new r(401,"Unauthorized");if(!i.ok){let e=await i.text();throw new r(i.status,e||"Request failed")}let c=i.headers.get("content-type");return c&&c.includes("application/json")?i.json():i},get(e){return this.request(e,{method:"GET"})},post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})},upload(e,t){let n=localStorage.getItem("token"),a=new FormData;a.append("file",t);let i={};return n&&(i.Authorization="Bearer ".concat(n)),fetch("".concat(s).concat(e),{method:"POST",headers:i,body:a}).then(async e=>{if(401===e.status)throw localStorage.removeItem("token"),window.location.href="/login",new r(401,"Unauthorized");if(!e.ok){let t=await e.text();throw new r(e.status,t||"Upload failed")}return e.json()})}},i="wss://panel.sebkucera.dev"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7909)}),_N_E=e.O()}]);