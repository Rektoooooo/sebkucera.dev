(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{8577:function(e,t,n){Promise.resolve().then(n.bind(n,2102))},2102:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(7437),r=n(2265),o=n(9116),l=n(4226),a=n(9178);function i(e){let{children:t,variant:n="default",className:r=""}=e;return(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ".concat({success:"bg-green-500/20 text-green-400 border-green-500/50",danger:"bg-red-500/20 text-red-400 border-red-500/50",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",default:"bg-zinc-500/20 text-zinc-400 border-zinc-500/50"}[n]," ").concat(r),children:t})}function c(e){let{className:t=""}=e,[n,l]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!0),u=(0,r.useRef)(null),h=(0,r.useRef)(null),x=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=new WebSocket("".concat(o._4,"/ws/logs?token=").concat(e));return x.current=t,t.onopen=()=>{i(!0)},t.onmessage=e=>{let t=e.data;l(e=>[...e,t])},t.onerror=()=>{i(!1)},t.onclose=()=>{i(!1)},()=>{t.close()}},[]),(0,r.useEffect)(()=>{c&&u.current&&u.current.scrollIntoView({behavior:"smooth"})},[n,c]),(0,s.jsxs)("div",{className:t,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Live Logs"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a?"bg-green-500":"bg-red-500")}),(0,s.jsx)("span",{className:"text-xs text-zinc-500",children:a?"Connected":"Disconnected"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>d(!c),className:"text-xs px-3 py-1 rounded ".concat(c?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400"),children:["Auto-scroll ",c?"ON":"OFF"]}),(0,s.jsx)("button",{onClick:()=>{l([])},className:"text-xs px-3 py-1 rounded bg-zinc-800 text-zinc-400 hover:bg-zinc-700",children:"Clear"})]})]}),(0,s.jsx)("div",{ref:h,onScroll:()=>{if(h.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=h.current;d(t-e-n<50)}},className:"bg-black border border-zinc-800 rounded-lg p-4 h-96 overflow-y-auto font-mono text-sm",children:0===n.length?(0,s.jsx)("div",{className:"text-zinc-600 text-center py-8",children:"No logs yet. Waiting for server output..."}):(0,s.jsxs)(s.Fragment,{children:[n.map((e,t)=>(0,s.jsx)("div",{className:"text-zinc-300 mb-1 whitespace-pre-wrap",children:e},t)),(0,s.jsx)("div",{ref:u})]})})]})}function d(){let[e,t]=(0,r.useState)(null),[n,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),x=(0,r.useCallback)(async()=>{try{let e=await o.hi.get("/server/status");t(e),h(t=>"start"===t&&e.online||"stop"===t&&!e.online||"restart"===t&&e.online?null:t)}catch(e){console.error("Failed to fetch status:",e)}finally{d(!1)}},[]);(0,r.useEffect)(()=>{x();let e=setInterval(x,5e3);return()=>clearInterval(e)},[]);let m=async e=>{h(e);try{await o.hi.post("/server/".concat(e))}catch(t){alert("Failed to ".concat(e," server: ").concat(t.message)),h(null)}};if(n)return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});let f=(null==e?void 0:e.online)===!0;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Monitor and control your Minecraft server"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(a.Z,{title:"Server Status",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i,{variant:f?"success":"danger",className:"text-lg px-4 py-2",children:f?"● Online":"● Offline"})}),f&&(null==e?void 0:e.players)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-zinc-400 text-sm mb-1",children:"Players Online"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-white",children:[e.players.online," / ",e.players.max]})]})]})}),(0,s.jsx)(a.Z,{title:"Quick Actions",className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)(l.z,{variant:"success",onClick:()=>m("start"),loading:"start"===u,disabled:f||null!==u,children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Server"]}),(0,s.jsxs)(l.z,{variant:"danger",onClick:()=>m("stop"),loading:"stop"===u,disabled:!f||null!==u,children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Stop Server"]}),(0,s.jsxs)(l.z,{variant:"secondary",onClick:()=>m("restart"),loading:"restart"===u,disabled:!f||null!==u,children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart Server"]})]})})]}),(0,s.jsx)(a.Z,{children:(0,s.jsx)(c,{})})]})}},4226:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var s=n(7437);function r(e){let{variant:t="primary",size:n="md",loading:r=!1,disabled:o,className:l="",children:a,...i}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#09090b] disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-zinc-800 hover:bg-zinc-700 text-white focus:ring-zinc-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-300 focus:ring-zinc-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(l),disabled:o||r,...i,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})}n(2265)},9178:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{children:t,className:n="",title:r}=e;return(0,s.jsxs)("div",{className:"bg-[#18181b] border border-zinc-800 rounded-lg p-6 ".concat(n),children:[r&&(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-white",children:r}),t]})}n(2265)},9116:function(e,t,n){"use strict";n.d(t,{_4:function(){return l},hi:function(){return o}});let s="https://panel.sebkucera.dev";class r extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}let o={async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),o={"Content-Type":"application/json",...t.headers};n&&(o.Authorization="Bearer ".concat(n));let l=await fetch("".concat(s).concat(e),{...t,headers:o});if(401===l.status)throw localStorage.removeItem("token"),window.location.href="/login",new r(401,"Unauthorized");if(!l.ok){let e=await l.text();throw new r(l.status,e||"Request failed")}let a=l.headers.get("content-type");return a&&a.includes("application/json")?l.json():l},get(e){return this.request(e,{method:"GET"})},post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})},upload(e,t){let n=localStorage.getItem("token"),o=new FormData;o.append("file",t);let l={};return n&&(l.Authorization="Bearer ".concat(n)),fetch("".concat(s).concat(e),{method:"POST",headers:l,body:o}).then(async e=>{if(401===e.status)throw localStorage.removeItem("token"),window.location.href="/login",new r(401,"Unauthorized");if(!e.ok){let t=await e.text();throw new r(e.status,t||"Upload failed")}return e.json()})}},l="wss://panel.sebkucera.dev"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8577)}),_N_E=e.O()}]);